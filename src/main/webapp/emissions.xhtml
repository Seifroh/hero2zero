<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Hero to Zero – CO₂-Emissionen</title>
        <meta charset="UTF-8"/>
        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
              integrity="sha384-…" crossorigin="anonymous"/>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </h:head>

    <h:body>
        <!-- Header mit Logo, Navigation -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <img src="#{request.contextPath}/resources/images/logo.png" alt="Hero2Zero" height="40"/>
                </a>
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <h:link outcome="emissions.xhtml" value="Home" styleClass="nav-link"/>
                    </li>
                    <li class="nav-item">
                        <h:link outcome="impressum.xhtml" value="Impressum" styleClass="nav-link"/>
                    </li>
                </ul>
            </div>
        </nav>

        <div class="container">
            <!-- Filter: Kontinentenauswahl -->
            <div class="row mb-3">
                <div class="col-md-4">
                    <h:form id="filterForm">
                        <div class="input-group">
                            <label class="input-group-text" for="continentSelect">Kontinent</label>
                            <h:selectOneMenu id="continentSelect"
                                             value="#{emissionBean.selectedContinent}"
                                             styleClass="form-select"
                                             onchange="document.getElementById('filterForm:submitBtn').click()">
                                <f:selectItem itemLabel="Alle" itemValue="" noSelectionOption="true"/>
                                <f:selectItem itemLabel="Afrika" itemValue="Afrika"/>
                                <f:selectItem itemLabel="Antarktis" itemValue="Antarktis"/>
                                <f:selectItem itemLabel="Asien" itemValue="Asien"/>
                                <f:selectItem itemLabel="Europa" itemValue="Europa"/>
                                <f:selectItem itemLabel="Nordamerika" itemValue="Nordamerika"/>
                                <f:selectItem itemLabel="Ozeanien" itemValue="Ozeanien"/>
                                <f:selectItem itemLabel="Südamerika" itemValue="Südamerika"/>
                            </h:selectOneMenu>
                            <button type="submit"
                                    id="filterForm:submitBtn"
                                    class="btn btn-primary"
                                    style="display:none">
                                Filtern
                            </button>
                        </div>
                    </h:form>
                </div>
            </div>

            <!-- Datentabelle -->
            <h:form id="tableForm">
                <div class="table-responsive">
                    <h:dataTable value="#{emissionBean.pageData}"
                                 var="e"
                                 border="1"
                                 styleClass="table table-striped">
                        <!-- ID -->
                        <h:column>
                            <f:facet name="header">ID</f:facet>
                                #{e.id}
                        </h:column>
                        <!-- Country -->
                        <h:column>
                            <f:facet name="header">Land</f:facet>
                                #{e.country}
                        </h:column>
                        <!-- Country Code -->
                        <h:column>
                            <f:facet name="header">Code</f:facet>
                                #{e.countryCode}
                        </h:column>
                        <!-- Year -->
                        <h:column>
                            <f:facet name="header">Jahr</f:facet>
                                #{e.year}
                        </h:column>
                        <!-- CO2 Emissions -->
                        <h:column>
                            <f:facet name="header">CO₂ (kt)</f:facet>
                                #{e.co2Emissions}
                        </h:column>
                    </h:dataTable>
                </div>
            </h:form>
            <div class="mt-3">
                <h:form>
                    <h:commandButton value="Zurück"
                                     action="#{emissionBean.prevPage}"
                                     disabled="#{!emissionBean.hasPrev}" />
                    <h:commandButton value="Weiter"
                                     action="#{emissionBean.nextPage}"
                                     disabled="#{!emissionBean.hasNext}" />
                </h:form>
            </div>
            <p class="mt-2 text-muted small">
                Seite #{emissionBean.currentPageDisplay} von #{emissionBean.totalPages} –
                Einträge insgesamt: #{emissionBean.totalEntries}
            </p>

        </div>
    </h:body>
</html>
